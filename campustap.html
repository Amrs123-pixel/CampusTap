<!-- GOOGLE MAP SECTION -->
<div id="map" style="width: 100%; height: 350px; border-radius: 10px; margin-top: 20px;"></div>

<script>
  let map;
  let marker;

  // Initialize Google Map
  function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {
      zoom: 16,
      center: { lat: 10.3157, lng: 123.8854 }, // default: Cebu
    });

    marker = new google.maps.Marker({
      map: map,
      title: "Student Location",
    });

    trackLiveLocation(); // start live tracking
  }

  // ðŸ”¥ LIVE TRACKING USING FIRESTORE
  function trackLiveLocation() {
    const user = firebase.auth().currentUser;
    if (!user) return console.log("No user logged in.");

    const docRef = db.collection("locations").doc(user.uid);

    docRef.onSnapshot((doc) => {
      if (!doc.exists) return console.log("No location data yet.");

      const data = doc.data();
      const newPos = { lat: data.lat, lng: data.lng };

      marker.setPosition(newPos);
      map.setCenter(newPos);
    });
  }
</script>

<!-- GOOGLE MAPS API SCRIPT (PUT YOUR API KEY BELOW) -->
<script async 
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCC6zhTh69EzWjLssvZx3HKbbquICIrK2s&callback=initMap">
</script>
